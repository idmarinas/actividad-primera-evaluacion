import{p as B,o as u,c as f,d as e,u as E,t as o,b as l,w as d,f as t,_ as m,n as S,a as g,j as b,T as D,g as z,F as k,q as P,r as F,h as r,i as N,k as V}from"./index-DH_JJOkS.js";import{a as O,u as R,c as j,b as q}from"./orders-qhLDz2BK.js";import{C,a as _,M as G,T as I,E as A,_ as X,b as H}from"./edit-Dcant1Zw.js";const J={},K={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 24 24"};function Q(x,a){return u(),f("svg",K,a[0]||(a[0]=[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12h.01M3 18h.01M3 6h.01M8 12h13M8 18h13M8 6h13"},null,-1)]))}const U=B(J,[["render",Q]]),W={class:"flex flex-row gap-2"},Y={class:"inline-flex items-center gap-3"},Z={class:"flex gap-2"},oe={__name:"details",props:{id:String},setup(x){const{modal:a,openModal:L,closeModal:M}=O(),w=P(),p=x;p.id===void 0&&w.push({name:"order_list"});const T=E(),c=R(),v=j(),i=c.find(p.id);function $(h){c.remove(h),w.push({name:"order_list"})}return T.title=i.client,(h,s)=>{const y=F("RouterLink");return u(),f(k,null,[e("h2",null,o(`Pedido nº ${p.id}`),1),e("div",W,[l(m,{"button-style":"danger",class:"rounded-md",onClick:s[0]||(s[0]=n=>t(L)(t(i)))},{default:d(()=>[l(I,{width:"32"}),s[2]||(s[2]=r(" Borrar pedido"))]),_:1}),s[5]||(s[5]=e("div",{class:"flex-1"},null,-1)),l(y,{to:{name:"order_list"},class:"not-prose"},{default:d(()=>[l(m,{class:"rounded-md"},{default:d(()=>[l(U,{width:"32"}),s[3]||(s[3]=r(" Lista de pedidos"))]),_:1})]),_:1}),l(y,{to:{name:"order_edit",params:{id:p.id}},class:"not-prose"},{default:d(()=>[l(m,{"button-style":"warning",class:"rounded-md"},{default:d(()=>[l(A,{width:"32"}),s[4]||(s[4]=r(" Editar pedido"))]),_:1})]),_:1},8,["to"])]),s[14]||(s[14]=e("h3",null,"Datos",-1)),e("dl",null,[s[6]||(s[6]=e("dt",null,"Fecha del pedido",-1)),e("dd",null,o(new Date(t(i).orderDate).toLocaleString(Intl.Locale,t(q))),1),s[7]||(s[7]=e("dt",null,"Procesado",-1)),e("dd",null,"Se han cortado un "+o(t(c).process(t(i)).toLocaleString(Intl.Locale,{style:"percent"}))+" de las piezas",1),s[8]||(s[8]=e("dt",null,"Servido",-1)),e("dd",null,[e("div",Y,[e("span",{class:S(t(i).served?"text-green-500":"text-red-500")},[(u(),g(b(t(i).served?C:_),{width:"24"}))],2),e("span",null,"El pedido "+o(t(i).served?"ya":"no")+" se ha entregado",1)])])]),e("h3",null,"Piezas ("+o(t(i).pieces.length)+")",1),e("table",null,[s[11]||(s[11]=e("thead",null,[e("tr",{class:"flex flex-col md:table-row"},[e("th",null,"Largo"),e("th",null,"Ancho"),e("th",null,"Grosor"),e("th",null,"Color"),e("th",null,"Superficie"),e("th",null,"Volumen"),e("th",null,"Cortada")])],-1)),l(D,{tag:"tbody",name:"list"},{default:d(()=>[(u(!0),f(k,null,N(t(i).pieces,n=>(u(),f("tr",{key:n,class:"flex flex-col md:table-row"},[e("td",null,o(n.dimensions.length)+" cm",1),e("td",null,o(n.dimensions.width)+" cm",1),e("td",null,o(n.dimensions.thickness)+" cm",1),e("td",null,o(n.color),1),e("td",null,[r(o(t(v).area(n.dimensions,n.bothFaces).toLocaleString())+" m",1),s[9]||(s[9]=e("sup",null,"2",-1))]),e("td",null,[r(o(t(v).volume(n.dimensions).toLocaleString())+" m",1),s[10]||(s[10]=e("sup",null,"3",-1))]),e("td",null,[l(H,{style:V(n.cut?"success":"danger")},{default:d(()=>[r(o(n.cut?"Sí":"No"),1)]),_:2},1032,["style"])])]))),128))]),_:1})]),(u(),g(z,{to:"body"},[l(G,{opened:t(a).opened,onClose:t(M)},{title:d(()=>[r(" ¿Seguro que desea borrar el pedido de "+o(t(a).item.client)+"? ",1)]),default:d(()=>[e("p",Z,[e("span",{class:S(t(a).item.served?"text-green-500":"text-red-500")},[(u(),g(b(t(a).item.served?C:_),{width:"24"}))],2),r(" El pedido "+o(t(a).item.served?"ya":"no")+" se ha entregado ",1)]),l(X,{type:"warning"},{default:d(()=>s[12]||(s[12]=[r("Esto borrara el pedido así como las piezas asociadas al mismo y no es posible recuperar el pedido.")])),_:1})]),actions:d(()=>[l(m,{"button-style":"danger",class:"rounded-md",onClick:s[1]||(s[1]=n=>$(t(a).item))},{default:d(()=>s[13]||(s[13]=[r("Borrar")])),_:1})]),_:1},8,["opened","onClose"])]))],64)}}};export{oe as default};
