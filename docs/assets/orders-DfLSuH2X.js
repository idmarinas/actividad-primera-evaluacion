import{G as O,z as h,H as v}from"./index-_USDnUB3.js";const y=O("pieces-private",()=>{let n=S("pieces-private");const e=h(n);function a(){localStorage.setItem("pieces-private",JSON.stringify(e.value))}function c(u){let f=!1;return u.forEach(l=>{const d=e.value.indexOf(l);d>-1&&(e.value.splice(d,1),f=!0)}),f}function o(u){const f=e.value.indexOf(u);return f>-1?(e.value.splice(f,1),!0):!1}return{state:e,save:a,delPiecesOfOrder:c,remove:o}}),P=O("pieces",()=>{const n=y(),e=N();function a(r){let s=r.length*r.width*r.thickness;return s=s/1e6,s}function c(r,s){let p=s?2:1;return r.length*r.width*p/1e4}function o(){return n.state}function u(){n.save()}function f(r){return n.delPiecesOfOrder(r)?(n.save(),!0):!1}function l(r){return n.remove(r)?((n.state.filter(p=>p.order===r.order)||[]).length<1&&e.remove(e.findById(r.order)),n.save(),!0):!1}function d(r){return e.findById(r)}function m(r){return n.state.filter(s=>s.order===r)||[]}function g(r){return r=Number.parseInt(r),n.state.find(s=>s.id===r)}function t(){let r=v();for(;g(r)!==void 0;)r=v();return r}function i(r){r.forEach(s=>{l(s),n.state.push(s)}),u()}return{volume:a,area:c,all:o,save:u,delPiecesOfOrder:f,remove:l,findOrderOfPiece:d,findPiecesOfOrder:m,generatePieceId:t,add:i}});function S(n){let e=localStorage.getItem(n);try{e=JSON.parse(e)}catch{e=!1}return e}const B={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1};function M(){const n=P(),e=h({opened:!1,item:{},order:{}});function a(o){e.value.opened=!0,e.value.item=o,e.value.order=n.findOrderOfPiece(o.order)}function c(){e.value.opened=!1,e.value.item={},e.value.order={}}return{modal:e,openModal:a,closeModal:c}}const x=O("orders-private",()=>{let n=S("orders-private");const e=h(n);function a(){localStorage.setItem("orders-private",JSON.stringify(e.value))}function c(o){const u=e.value.indexOf(o);return u>-1?(e.value.splice(u,1),!0):!1}return{state:e,save:a,remove:c}}),N=O("orders",()=>{const n=x(),e=P();function a(t){var s,p;let i=((s=t.pieces)==null?void 0:s.length)||0;return i===0?0:(((p=t.pieces.filter(I=>I.cut===!0))==null?void 0:p.length)||0)/i}function c(t){return t=Number.parseInt(t),a(l(t))}function o(){return n.state}function u(){n.save()}function f(t){return t=l(t.id),(t.pieces.length<1||e.delPiecesOfOrder(t.pieces))&&n.remove(t)?(n.save(),!0):!1}function l(t){t=Number.parseInt(t);let i=d(t)||{};return i.pieces=e.findPiecesOfOrder(t),i}function d(t){return t=Number.parseInt(t),n.state.find(i=>i.id===t)}function m(){let t=v();for(;d(t)!==void 0;)t=v();return t}function g(t){let i=t.pieces;delete t.pieces;const r=n.state.indexOf(t);r>-1&&n.state.splice(r,1),n.state.push(t),u(),e.add(i)}return{process:a,all:o,save:u,remove:f,find:l,findById:d,generateOrderId:m,processById:c,add:g}});export{P as a,M as b,B as c,N as u};
//# sourceMappingURL=orders-DfLSuH2X.js.map
