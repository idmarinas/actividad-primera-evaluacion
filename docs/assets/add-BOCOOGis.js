import{m as A,l as c,o as r,c as v,p as G,v as z,d as l,a as E,q as u,b as t,w as g,h as b,_ as k,F as y,u as q,x as I,e as _,y as j,f as W,t as C,i as M}from"./index-aNb5nz8l.js";import{A as H}from"./add-DUfoQ5HG.js";import{c as J,u as K,_ as Q}from"./alert-CuO-luqn.js";const R={class:"col-span-2 flex gap-3 items-center"},X={key:1,class:"flex-1 flex gap-0"},Y={class:"col-span-full"},Z={class:"col-span-full grid grid-cols-3 gap-3"},ee={class:"flex gap-3 items-center"},de={class:"flex gap-3 items-center"},le={class:"flex gap-3 items-center"},se={class:"flex gap-3 items-center"},oe={class:"flex gap-3 items-center"},ne={class:"flex gap-3 items-center"},te={__name:"add",props:A({isEdit:Boolean},{id:{},idModifiers:{},order:{},orderModifiers:{},dimensionsLength:{},dimensionsLengthModifiers:{},dimensionsWidth:{},dimensionsWidthModifiers:{},dimensionsThickness:{},dimensionsThicknessModifiers:{},color:{},colorModifiers:{},bothFaces:{type:Boolean},bothFacesModifiers:{},cut:{type:Boolean},cutModifiers:{}}),emits:["update:id","update:order","update:dimensionsLength","update:dimensionsWidth","update:dimensionsThickness","update:color","update:bothFaces","update:cut"],setup(m){const T=J(),w=m,f=c(m,"id"),o=c(m,"order"),U=c(m,"dimensionsLength"),h=c(m,"dimensionsWidth"),V=c(m,"dimensionsThickness"),$=c(m,"color"),x=c(m,"bothFaces",{set(p){return p=!!p,p}}),F=c(m,"cut",{set(p){return p=!!p,p}});function i(){f.value=T.generatePieceId()}return(p,d)=>(r(),v(y,null,[G(l("input",{type:"hidden","onUpdate:modelValue":d[0]||(d[0]=n=>o.value=n)},null,512),[[z,o.value]]),l("div",R,[d[11]||(d[11]=l("label",{for:"piece_id"},"Nº de pedido",-1)),w.isEdit?(r(),E(u,{key:0,type:"number",class:"rounded-lg flex-1",id:"piece_id",modelValue:f.value,"onUpdate:modelValue":d[1]||(d[1]=n=>f.value=n)},null,8,["modelValue"])):(r(),v("div",X,[t(u,{type:"number",readonly:"",class:"rounded-l-lg flex-1",id:"piece_id",modelValue:f.value,"onUpdate:modelValue":d[2]||(d[2]=n=>f.value=n)},null,8,["modelValue"]),t(k,{class:"rounded-r-lg",onClick:d[3]||(d[3]=n=>i()),disabled:f.value!==void 0},{default:g(()=>d[10]||(d[10]=[b("Generar")])),_:1},8,["disabled"])]))]),l("div",Y,[d[15]||(d[15]=l("h5",null,"Dimensiones",-1)),l("div",Z,[l("div",ee,[d[12]||(d[12]=l("label",{for:"piece_dimensions_length"},"Largo (cm)",-1)),t(u,{class:"rounded-lg flex-1",type:"number",id:"piece_dimensions_length",modelValue:U.value,"onUpdate:modelValue":d[4]||(d[4]=n=>U.value=n),step:"1"},null,8,["modelValue"])]),l("div",de,[d[13]||(d[13]=l("label",{for:"piece_dimensions_width"},"Ancho (cm)",-1)),t(u,{class:"rounded-lg flex-1",type:"number",id:"piece_dimensions_width",modelValue:h.value,"onUpdate:modelValue":d[5]||(d[5]=n=>h.value=n),step:"1"},null,8,["modelValue"])]),l("div",le,[d[14]||(d[14]=l("label",{for:"piece_dimensions_thickness"},"Grosor (cm)",-1)),t(u,{class:"rounded-lg flex-1",type:"number",id:"piece_dimensions_thickness",modelValue:V.value,"onUpdate:modelValue":d[6]||(d[6]=n=>V.value=n),step:"1"},null,8,["modelValue"])])])]),l("div",se,[d[16]||(d[16]=l("label",{for:"piece_color"},"Color chapado",-1)),t(u,{class:"rounded-lg flex-1",type:"text",id:"piece_color",modelValue:$.value,"onUpdate:modelValue":d[7]||(d[7]=n=>$.value=n)},null,8,["modelValue"])]),l("div",oe,[t(u,{type:"checkbox",id:"piece_bothFaces",modelValue:x.value,"onUpdate:modelValue":d[8]||(d[8]=n=>x.value=n)},null,8,["modelValue"]),d[17]||(d[17]=l("label",{for:"piece_bothFaces"},"¿Ambas caras?",-1))]),l("div",ne,[t(u,{type:"checkbox",id:"piece_cut",modelValue:F.value,"onUpdate:modelValue":d[9]||(d[9]=n=>F.value=n)},null,8,["modelValue"]),d[18]||(d[18]=l("label",{for:"piece_cut"},"¿Cortada?",-1))])],64))}},ie={class:"space-y-1"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},re={class:"flex gap-3 items-center"},ue={key:1,class:"flex-1 flex gap-0"},me={class:"flex gap-3 items-center"},pe={class:"flex gap-3 items-center"},fe={class:"flex gap-3 items-center"},ve={class:"flex-1"},ce={class:"flex gap-3 items-center"},ge={class:"flex items-center"},be={class:"col-span-full grid grid-cols-1 divide-y-2 divide-gold-sand-500"},Ve={class:"col-span-full flex gap-3 mb-3"},Ue={__name:"add",props:{id:String},setup(m){const T=q(),w=m,f=K(),o=I(f.find(w.id));o.value.served=!1;function U(){o.value.id=f.generateOrderId()}function h(){return o.value.id!==void 0}const V=h();function $(){if(o.value.pieces.length<1)return"Todavia no se han agregado piezas al pedido";let n=f.process(o);return`${n===void 0?"¿?":n.toLocaleString(Intl.Locale,{style:"percent"})}`}function x(){return o.value.id!==void 0}function F(){o.value.pieces.push({dimensions:{},bothFaces:!1,cut:!1})}const i=I({invalid:[]}),p=_(n=>Object.keys(i.value).length<1);function d(){delete i.value.invalid,o.value.id===void 0?i.value.id=['Genera un Número de pedido usando el botón de "Generar"']:delete i.value.id,typeof o.value.client!="string"||o.value.client.length<5?i.value.client=["Se debe poner el nombre y apellidos de cliente y debe tener como mínimo 5 letras"]:delete i.value.client;const n=new Date(o.value.dateOrder);isNaN(n.getTime())||new Date().getTime()<n.getTime()?i.value.dateOrder=["La fecha no tiene un formato válido","La fecha puede que sea posterior a la fecha actual"]:delete i.value.dateOrder}return T.title=V?"Editar pedido":"Crear pedido",(n,e)=>{var O,B,N,S,P,D;return r(),v(y,null,[!p.value&&!i.value.invalid?(r(),E(Q,{key:0,type:"error"},{title:g(()=>e[9]||(e[9]=[b(" El formulario contiene errores ")])),default:g(()=>[(r(!0),v(y,null,M(i.value,s=>(r(),v("div",ie,[(r(!0),v(y,null,M(s,L=>(r(),v(y,null,[b(C(L),1),e[10]||(e[10]=l("br",null,null,-1))],64))),256))]))),256))]),_:1})):j("",!0),l("form",ae,[e[20]||(e[20]=l("h2",{class:"col-span-full"},"Datos del pedido",-1)),l("div",re,[e[12]||(e[12]=l("label",{for:"order_id"},"Nº de pedido",-1)),W(V)?(r(),E(u,{key:0,type:"number",readonly:"",class:"rounded-lg flex-1",id:"order_id",modelValue:o.value.id,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.id=s)},null,8,["modelValue"])):(r(),v("div",ue,[t(u,{error:((B=(O=i.value)==null?void 0:O.id)==null?void 0:B.length)>0,type:"number",readonly:"",class:"rounded-l-lg flex-1",id:"order_id",modelValue:o.value.id,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.id=s)},null,8,["error","modelValue"]),t(k,{class:"rounded-r-lg",onClick:e[2]||(e[2]=s=>U()),disabled:o.value.id!==void 0},{default:g(()=>e[11]||(e[11]=[b("Generar")])),_:1},8,["disabled"])]))]),l("div",me,[e[13]||(e[13]=l("label",{for:"order_client"},"Cliente",-1)),t(u,{error:((S=(N=i.value)==null?void 0:N.client)==null?void 0:S.length)>0,type:"text",class:"rounded-lg flex-1",id:"order_client",modelValue:o.value.client,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.client=s)},null,8,["error","modelValue"])]),l("div",pe,[e[14]||(e[14]=l("label",{for:"order_date"},"Fecha pedido",-1)),t(u,{error:((D=(P=i.value)==null?void 0:P.dateOrder)==null?void 0:D.length)>0,type:"datetime-local",class:"rounded-lg flex-1",id:"order_date",modelValue:o.value.dateOrder,"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.dateOrder=s)},null,8,["error","modelValue"])]),l("div",fe,[e[15]||(e[15]=l("label",null,"Procesado",-1)),l("div",ve,C($()),1)]),l("div",ce,[t(u,{type:"checkbox",class:"rounded-lg",id:"order_served",modelValue:o.value.served,"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.served=s)},null,8,["modelValue"]),e[16]||(e[16]=l("label",{for:"order_served"},"Servido",-1))]),e[21]||(e[21]=l("h3",{class:"col-span-full"},"Piezas encargadas",-1)),l("div",ge,[t(k,{onClick:e[6]||(e[6]=s=>F()),"button-style":x()?"success":"warning",class:"rounded-lg",icon:!0,disabled:!x()},{default:g(()=>[t(H,{width:"24"}),b(" "+C(x()?"Añadir pieza":"Crea un ID para el pedido"),1)]),_:1},8,["button-style","disabled"])]),l("div",be,[(r(!0),v(y,null,M(o.value.pieces,(s,L)=>(r(),v("div",{key:L,class:"grid grid-cols-3 gap-3 py-3"},[t(te,{isEdit:W(V),order:o.value.id,"onUpdate:order":e[7]||(e[7]=a=>o.value.id=a),id:s.id,"onUpdate:id":a=>s.id=a,"dimensions-length":s.dimensions.length,"onUpdate:dimensionsLength":a=>s.dimensions.length=a,"dimensions-width":s.dimensions.width,"onUpdate:dimensionsWidth":a=>s.dimensions.width=a,"dimensions-thickness":s.dimensions.thickness,"onUpdate:dimensionsThickness":a=>s.dimensions.thickness=a,color:s.color,"onUpdate:color":a=>s.color=a,"both-faces":s.bothFaces,"onUpdate:bothFaces":a=>s.bothFaces=a,cut:s.cut,"onUpdate:cut":a=>s.cut=a},null,8,["isEdit","order","id","onUpdate:id","dimensions-length","onUpdate:dimensionsLength","dimensions-width","onUpdate:dimensionsWidth","dimensions-thickness","onUpdate:dimensionsThickness","color","onUpdate:color","both-faces","onUpdate:bothFaces","cut","onUpdate:cut"])]))),128))]),l("div",Ve,[e[19]||(e[19]=l("div",{class:"flex-1"},null,-1)),t(k,{class:"rounded-lg",onClick:e[8]||(e[8]=s=>d())},{default:g(()=>e[17]||(e[17]=[b("Validar datos")])),_:1}),t(k,{"button-style":"success",class:"rounded-lg",type:"sumit",disabled:!p.value},{default:g(()=>e[18]||(e[18]=[b("Guardar pedido")])),_:1},8,["disabled"])])])],64)}}};export{Ue as default};
//# sourceMappingURL=add-BOCOOGis.js.map
