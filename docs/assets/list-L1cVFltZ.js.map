{"version":3,"file":"list-L1cVFltZ.js","sources":["../../src/views/orders/list.vue"],"sourcesContent":["<script setup>\nimport { usePageTitleStore } from '@/stores/page-title'\n\nimport { useOrdersStore } from '@/stores/orders'\nimport { computed } from 'vue'\nimport { useDateOptions, useModal } from '@/composables/common'\n\nimport Button from '@/components/forms/button.vue'\nimport Add from '@/components/icons/add.vue'\nimport Modal from '@/components/dialogs/modal.vue'\nimport CircleCheck from '@/components/icons/circle/check.vue'\nimport CircleX from '@/components/icons/circle/x.vue'\nimport Badge from '@/components/tags/badge.vue'\nimport Alert from '@/components/dialogs/alert.vue'\n\nimport Del from '@/components/forms/buttons/icons/del.vue'\nimport Edit from '@/components/forms/buttons/icons/edit.vue'\nimport Info from '@/components/forms/buttons/icons/info.vue'\n\nconst titleStore = usePageTitleStore()\nconst ordersStore = useOrdersStore()\n\nconst { modal, openModal, closeModal } = useModal()\n\nconst list = computed(() => ordersStore.all())\n\nfunction deleteOrder(item) {\n\tordersStore.remove(item)\t\n\tcloseModal()\n}\n\ntitleStore.title = 'Lista de pedidos'\n</script>\n\n<template>\n\t<div class=\"flex flex-row justify-end\">\n\t\t<RouterLink :to=\"{ name: 'order_add' }\" class=\"not-prose\">\n\t\t\t<Button button-style=\"success\" class=\"rounded-lg\" :icon=\"true\"><Add width=\"24\" /> <span>Crear pedido</span></Button>\n\t\t</RouterLink>\n\t</div>\n\t<table>\n\t\t<thead>\n\t\t\t<tr class=\"flex flex-col md:table-row\">\n\t\t\t\t<th>Cliente</th>\n\t\t\t\t<th>Fecha pedido</th>\n\t\t\t\t<th>Procesado</th>\n\t\t\t\t<th>Servido</th>\n\t\t\t\t<th></th>\n\t\t\t</tr>\n\t\t</thead>\n\t\t<TransitionGroup tag=\"tbody\" name=\"list\">\n\t\t\t<tr v-for=\"item in list\" :key=\"item\" class=\"flex flex-col md:table-row\">\n\t\t\t\t<td>{{ item.client }}</td>\n\t\t\t\t<td>{{ (new Date(item.orderDate)).toLocaleString(Intl.Locale, useDateOptions) }}</td>\n\t\t\t\t<td>{{ ordersStore.processById(item.id).toLocaleString(Intl.Locale, {style : 'percent' }) }}</td>\n\t\t\t\t<td><Badge :style=\"item.served ? 'success' : 'danger'\">{{ item.served ? 'Sí' : 'No' }}</Badge></td>\n\t\t\t\t<td class=\"h-full flex items-center justify-center md:justify-end gap-2\">\n\t\t\t\t\t<RouterLink :to=\"{ name: 'order_details', params: { id: item.id }}\" class=\"not-prose\"><Info /></RouterLink>\n\t\t\t\t\t<RouterLink :to=\"{ name: 'order_edit', params: { id: item.id } }\" class=\"not-prose\"><Edit /></RouterLink>\n\t\t\t\t\t<Del @click=\"openModal(item)\" />\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</TransitionGroup>\n\t</table>\n\t\n\t<Teleport to=\"body\">\n\t\t<Modal :opened=\"modal.opened\" @close=\"closeModal\">\n\t\t\t<template #title>\n\t\t\t\t¿Seguro que desea borrar el pedido de {{ modal.item.client }}?\n\t\t\t</template>\n\n\t\t\t<template #default>\n\t\t\t\t<p class=\"flex gap-2\">\n\t\t\t\t\t<span :class=\"modal.item.served ? 'text-green-500' : 'text-red-500'\">\n\t\t\t\t\t\t<component :is=\"modal.item.served ? CircleCheck : CircleX \" width=\"24\" />\n\t\t\t\t\t</span>\n\t\t\t\t\tEl pedido {{ modal.item.served ? 'ya' : 'no' }} se ha entregado\n\t\t\t\t</p>\n\t\t\t\t<Alert type=\"warning\">Esto borrara el pedido así como las piezas asociadas al mismo y no es posible recuperar el pedido.</Alert>\n\t\t\t</template>\n\n\t\t\t<template #actions>\n\t\t\t\t<Button button-style=\"danger\" class=\"rounded-md\" @click=\"deleteOrder(modal.item)\">Borrar</Button>\n\t\t\t</template>\n\t\t</Modal>\n\t</Teleport>\n</template>\n"],"names":["titleStore","usePageTitleStore","ordersStore","useOrdersStore","modal","openModal","closeModal","useModal","list","computed","deleteOrder","item"],"mappings":"kuBAmBA,MAAMA,EAAaC,EAAiB,EAC9BC,EAAcC,EAAc,EAE5B,CAAE,MAAAC,EAAO,UAAAC,EAAW,WAAAC,CAAU,EAAKC,EAAQ,EAE3CC,EAAOC,EAAS,IAAMP,EAAY,IAAK,CAAA,EAE7C,SAASQ,EAAYC,EAAM,CAC1BT,EAAY,OAAOS,CAAI,EACvBL,EAAU,CACX,CAEA,OAAAN,EAAW,MAAQ"}