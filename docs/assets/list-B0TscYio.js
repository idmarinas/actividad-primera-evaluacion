import{u as N,e as y,y as C,c as m,d as l,b as t,w as s,_ as c,T as V,a as S,f as d,g as j,F as v,o as u,h as a,r as x,t as n,n as q,i as D,j as F,q as P,B as G,k as R}from"./index-DHnoSDYb.js";import{c as I,u as O,a as U,_ as X}from"./alert-D-VnYJEd.js";import{A as k}from"./add-BOs-Qe4q.js";import{M as _,_ as H,C as J,a as K,E as Q}from"./edit-BJ3OxfaU.js";import{_ as W,a as Y}from"./edit-Ckfek0YD.js";const Z={class:"flex flex-row justify-end"},h={class:"h-full flex items-center justify-center md:justify-end gap-2"},ee={class:"flex gap-2"},le=["value"],ie={__name:"list",setup(oe){const w=N(),f=I(),M=O(),{modal:r,openModal:z,closeModal:g}=U(),L=y(()=>f.all()),$=y(()=>M.all()),i=C({opened:!1,item:{},order:{}});function A(){i.value.opened=!0,i.value.item={},i.value.order={}}function E(){i.value.opened=!1,i.value.item={},i.value.order={}}function B(b){f.remove(b),g()}const p=C(void 0);return w.title="Lista de piezas",(b,e)=>{const T=R("RouterLink");return u(),m(v,null,[l("div",Z,[t(c,{"button-style":"success",class:"rounded-md inline-flex gap-2 items-center",onClick:e[0]||(e[0]=o=>A())},{default:s(()=>[t(k,{width:"24"}),e[3]||(e[3]=a()),e[4]||(e[4]=l("span",null,"Añadir pieza",-1))]),_:1})]),l("table",null,[e[7]||(e[7]=l("thead",null,[l("tr",{class:"flex flex-col md:table-row"},[l("th",null,"Largo"),l("th",null,"Ancho"),l("th",null,"Grosor"),l("th",null,"Color"),l("th",null,"Superficie"),l("th",null,"Volumen"),l("th",null,"Cortada"),l("th")])],-1)),t(V,{tag:"tbody",name:"list"},{default:s(()=>[(u(!0),m(v,null,x(L.value,o=>(u(),m("tr",{key:o,class:"flex flex-col md:table-row"},[l("td",null,n(o.dimensions.length)+" cm",1),l("td",null,n(o.dimensions.width)+" cm",1),l("td",null,n(o.dimensions.thickness)+" cm",1),l("td",null,n(o.color),1),l("td",null,[a(n(d(f).area(o.dimensions,o.bothFaces).toLocaleString())+" m",1),e[5]||(e[5]=l("sup",null,"2",-1))]),l("td",null,[a(n(d(f).volume(o.dimensions).toLocaleString())+" m",1),e[6]||(e[6]=l("sup",null,"3",-1))]),l("td",null,[t(H,{style:q(o.cut?"success":"danger")},{default:s(()=>[a(n(o.cut?"Sí":"No"),1)]),_:2},1032,["style"])]),l("td",h,[t(T,{to:{name:"order_edit",params:{id:o.order}}},{default:s(()=>[t(W)]),_:2},1032,["to"]),t(Y,{onClick:te=>d(z)(o)},null,8,["onClick"])])]))),128))]),_:1})]),(u(),S(j,{to:"body"},[t(_,{opened:d(r).opened,onClose:d(g)},{title:s(()=>[a(" ¿Seguro que desea borrar la pieza "+n(d(r).item.id)+"? ",1)]),default:s(()=>[l("p",ee,[l("span",{class:D(d(r).order.served?"text-green-500":"text-red-500")},[(u(),S(F(d(r).order.served?J:K),{width:"24"}))],2),a(" El pedido "+n(d(r).order.served?"ya":"no")+" se ha entregado ",1)]),t(X,{type:"warning"},{default:s(()=>[a('Esto borrara la pieza del cliente "'+n(d(r).order.client)+'" y en caso de que el pedido no tenga más piezas se borrará también. Está acción no se puede deshacer',1)]),_:1})]),actions:s(()=>[t(c,{"button-style":"danger",class:"rounded-md",onClick:e[1]||(e[1]=o=>B(d(r).item))},{default:s(()=>e[8]||(e[8]=[a("Borrar")])),_:1})]),_:1},8,["opened","onClose"]),t(_,{opened:i.value.opened,onClose:E},{title:s(()=>e[9]||(e[9]=[a(" ¿A que pedido se le van a añadir piezas? ")])),default:s(()=>[P(l("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>p.value=o),class:"rounded-lg",id:"select_order","aria-label":"Selecciona un pedido"},[e[10]||(e[10]=l("option",{disabled:"",value:"undefined"},"Selecciona un pedido",-1)),(u(!0),m(v,null,x($.value,o=>(u(),m("option",{key:o.id,value:o.id},n(o.client)+" ("+n(o.id)+") ",9,le))),128))],512),[[G,p.value]]),e[11]||(e[11]=l("p",null,"También se puede crear un nuevo pedido",-1))]),actions:s(()=>[t(c,{disabled:p.value===void 0,"button-style":"warning",class:"rounded-lg",icon:!0,"as-route":p.value===void 0?void 0:{name:"order_edit",params:{id:p.value}}},{default:s(()=>[t(Q,{width:"24"}),e[12]||(e[12]=a()),e[13]||(e[13]=l("span",null,"Editar",-1))]),_:1},8,["disabled","as-route"]),t(c,{"button-style":"success",class:"rounded-lg",icon:!0,"as-route":{name:"order_add"}},{default:s(()=>[t(k,{width:"24"}),e[14]||(e[14]=a()),e[15]||(e[15]=l("span",null,"Nuevo pedido",-1))]),_:1})]),_:1},8,["opened"])]))],64)}}};export{ie as default};
//# sourceMappingURL=list-B0TscYio.js.map
