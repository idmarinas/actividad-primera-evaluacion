{"version":3,"file":"orders-BfuGO-KL.js","sources":["../../src/stores/pieces.js","../../src/composables/common.js","../../src/stores/orders.js"],"sourcesContent":["import { defineStore } from \"pinia\"\nimport { ref } from \"vue\"\nimport { useStorateJsonParse } from \"@/composables/common\"\nimport { useOrdersStore } from \"./orders\"\nimport { useRandomId } from \"@/composables/fake\"\n\nconst usePrivateState = defineStore('pieces-private', () => {\n\tlet storage = useStorateJsonParse('pieces-private')\n\tconst state = ref(storage)\n\n\tfunction save() {\n\t\tlocalStorage.setItem('pieces-private', JSON.stringify(state.value))\n\t}\n\n\tfunction delPiecesOfOrder(items) {\n\t\tlet success = false\n\n\t\titems.forEach(item => {\n\t\t\tconst index = state.value.indexOf(item)\n\n\t\t\tif (index > -1) {\n\t\t\t\tstate.value.splice(index, 1)\n\t\n\t\t\t\tsuccess = true\n\t\t\t}\n\t\t})\n\n\t\treturn success\n\t}\n\n\tfunction remove(item){\n\t\tconst index = state.value.indexOf(item)\n\n\t\tif (index > -1) {\n\t\t\tstate.value.splice(index, 1)\n\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\treturn { state, save, delPiecesOfOrder, remove }\n})\n\nexport const usePiecesStore = defineStore('pieces', () => {\n\tconst state = usePrivateState()\n\tconst orders = useOrdersStore()\n\n\tfunction volume (dimensions) {\n\t\tlet volume = dimensions.length * dimensions.width * dimensions.thickness\n\t\tvolume = volume / 1000000 // m3\n\n\t\treturn volume\n\t}\n\t\n\tfunction area (dimensions, bothFaces) {\n\t\tlet faces = bothFaces ? 2 : 1\n\t\t// largo × ancho, largo × grosor, y ancho × grosor.\n\t\tlet result1 = (dimensions.length * dimensions.width)\n\t\t// let result2 = (dimensions.length * dimensions.thickness) * 2\n\t\t// let result3 = (dimensions.width * dimensions.thickness) * 2\n\t\t\n\t\tlet areaM = (result1 * faces) / 10000 // m2\n\n\t\treturn areaM \n\t}\n\n\tfunction all() {\n\t\treturn state.state\n\t}\t\n\t\n\t// Se guardan todas las piezas\n\tfunction save() {\n\t\tstate.save()\n\t}\n\n\tfunction delPiecesOfOrder(items) {\n\t\tif (state.delPiecesOfOrder(items)){\n\t\t\tstate.save()\n\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\tfunction remove(item) {\n\t\tif (state.remove(item)) {\n\t\t\tlet pieces = state.state.filter(i => i.order === item.order) || []\n\n\t\t\t// Se borra el pedido si no tiene piezas asociadas\n\t\t\tif (pieces.length < 1) {\n\t\t\t\torders.remove(orders.findById(item.order))\n\t\t\t}\n\n\t\t\tstate.save()\n\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\tfunction findOrderOfPiece(orderId) {\n\t\treturn orders.findById(orderId)\n\t}\n\n\tfunction findPiecesOfOrder(orderId) {\n\t\treturn state.state.filter(item => item.order === orderId) || []\n\t}\n\n\tfunction findById(id) {\n\t\tid = Number.parseInt(id)\n\t\treturn state.state.find(item => item.id === id)\n\t}\n\n\tfunction generatePieceId() {\n\t\tlet id = useRandomId()\n\t\t\n\t\twhile (findById(id) !== undefined) {\n\t\t\tid = useRandomId()\n\t\t}\n\t\n\t\treturn id\n\t}\n\t\n\treturn { volume, area, all, save, delPiecesOfOrder, remove, findOrderOfPiece, findPiecesOfOrder, generatePieceId }\n})\n","import { usePiecesStore } from \"@/stores/pieces\";\nimport { ref } from \"vue\";\n\nexport function useRandomNumber(min, max) {\n\tmin = Math.ceil(min);\n\tmax = Math.floor(max);\n\treturn Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport function useStorateJsonParse(name) {\n\tlet storage = localStorage.getItem(name)\n\n\ttry {\n\t\tstorage = JSON.parse(storage)\n\t} catch (error) {\n\t\tstorage = false\n\t}\n\n\treturn storage\n}\n\nexport const useDateOptions = { \n\tweekday: 'long',\n\tyear: 'numeric',\n\tmonth: 'long',\n\tday: 'numeric',\n\thour: 'numeric',\n\tminute: 'numeric',\n\thour12: false \n}\n\nexport function useModal() {\n\tconst store = usePiecesStore()\n\n\tconst modal = ref({\n\t\topened: false,\n\t\titem: {},\n\t\torder: {}\n\t})\n\t\n\tfunction openModal(item) {\n\t\tmodal.value.opened = true\n\t\tmodal.value.item = item\n\t\tmodal.value.order = store.findOrderOfPiece(item.order)\n\t}\n\n\tfunction closeModal() {\n\t\tmodal.value.opened = false\n\t\tmodal.value.item = {}\n\t\tmodal.value.order = {}\n\t}\n\n\treturn { modal, openModal, closeModal }\n}\n","import { defineStore } from \"pinia\"\nimport { ref } from \"vue\"\nimport { useStorateJsonParse } from \"@/composables/common\"\nimport { usePiecesStore } from \"./pieces\"\nimport { useRandomId } from \"@/composables/fake\"\n\n\nconst usePrivateState = defineStore('orders-private', () => {\n\tlet storage = useStorateJsonParse('orders-private')\n\tconst state = ref(storage)\n\n\tfunction save() {\n\t\tlocalStorage.setItem('orders-private', JSON.stringify(state.value))\n\t}\n\n\tfunction remove(item) {\n\n\t\tconst index = state.value.indexOf(item)\n\n\t\tif (index > -1) {\n\t\t\tstate.value.splice(index, 1)\n\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\treturn { state, save, remove }\n})\n\n\nexport const useOrdersStore = defineStore('orders', () => {\n\tconst state = usePrivateState()\n\tconst pieces = usePiecesStore()\n\n\tfunction process(order) {\n\t\tif (order.id === undefined) {\n\t\t\treturn undefined\n\t\t}\n\n\t\tlet total = order.pieces.length\n\t\tlet completed  = order.pieces.filter(item => item.cut === true).length\n\n\t\treturn completed / total\n\t}\n\n\tfunction processById(orderId) {\n\t\torderId = Number.parseInt(orderId)\n\n\t\treturn process(find(orderId))\n\t}\n\n\tfunction all () {\n\t\treturn state.state\n\t}\n\n\t// Se guardan todos los pedidos\n\tfunction save() {\n\t\tstate.save()\n\t}\n\n\tfunction remove(item) {\n\t\titem = find(item.id)\n\n\t\tif (item.pieces.length < 1 || pieces.delPiecesOfOrder(item.pieces)) {\n\t\t\tif (state.remove(item)){\n\t\t\t\tstate.save()\n\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\n\t\treturn false\n\t}\n\n\tfunction find(id) {\n\t\tid = Number.parseInt(id)\n\t\tlet order = findById(id) || {}\n\t\torder.pieces = pieces.findPiecesOfOrder(id)\n\n\t\treturn order\n\t}\n\t\n\tfunction findById(id) {\n\t\tid = Number.parseInt(id)\n\t\treturn state.state.find(item => item.id === id)\n\t}\n\n\tfunction generateOrderId() {\n\t\tlet id = useRandomId()\n\n\t\twhile (findById(id) !== undefined) {\n\t\t\tid = useRandomId()\n\t\t}\n\n\t\treturn id\n\t}\n\n\treturn { process, all, save, remove, find, findById, generateOrderId, processById }\n})\n"],"names":["usePrivateState","defineStore","storage","useStorateJsonParse","state","ref","save","delPiecesOfOrder","items","success","item","index","remove","usePiecesStore","orders","useOrdersStore","volume","dimensions","area","bothFaces","faces","all","i","findOrderOfPiece","orderId","findPiecesOfOrder","findById","id","generatePieceId","useRandomId","name","useDateOptions","useModal","store","modal","openModal","closeModal","pieces","process","order","total","processById","find","generateOrderId"],"mappings":"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"}