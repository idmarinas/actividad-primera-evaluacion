import{A as $,o as u,c,d as e,u as E,t as o,b as l,w as r,f as s,_ as m,j as S,a as g,k,T as z,g as D,F as C,z as P,r as F,h as d,i as N,n as V}from"./index-BA8qmTtW.js";import{a as I,u as O,c as R,b as j,_ as A}from"./alert-DXBPOSZO.js";import{C as _,a as b,M as G,T as q,E as X,_ as H}from"./edit-5Rv_KNcr.js";const J={},K={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 24 24"};function Q(x,a){return u(),c("svg",K,a[0]||(a[0]=[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12h.01M3 18h.01M3 6h.01M8 12h13M8 18h13M8 6h13"},null,-1)]))}const U=$(J,[["render",Q]]),W={class:"flex flex-row gap-2"},Y={class:"inline-flex items-center gap-3"},Z={class:"flex gap-2"},oe={__name:"details",props:{id:String},setup(x){const{modal:a,openModal:L,closeModal:M}=I(),w=P(),p=x;p.id===void 0&&w.push({name:"order_list"});const B=E(),f=O(),v=R(),i=f.find(p.id);function T(y){f.remove(y),w.push({name:"order_list"})}return B.title=i.client,(y,t)=>{const h=F("RouterLink");return u(),c(C,null,[e("h2",null,o(`Pedido nº ${p.id}`),1),e("div",W,[l(m,{"button-style":"danger",class:"rounded-lg",onClick:t[0]||(t[0]=n=>s(L)(s(i))),icon:!0},{default:r(()=>[l(q,{width:"24"}),t[2]||(t[2]=d(" Borrar pedido"))]),_:1}),t[5]||(t[5]=e("div",{class:"flex-1"},null,-1)),l(h,{to:{name:"order_list"},class:"not-prose"},{default:r(()=>[l(m,{class:"rounded-lg",icon:!0},{default:r(()=>[l(U,{width:"24"}),t[3]||(t[3]=d(" Lista de pedidos"))]),_:1})]),_:1}),l(h,{to:{name:"order_edit",params:{id:p.id}},class:"not-prose"},{default:r(()=>[l(m,{"button-style":"warning",class:"rounded-lg",icon:!0},{default:r(()=>[l(X,{width:"24"}),t[4]||(t[4]=d(" Editar pedido"))]),_:1})]),_:1},8,["to"])]),t[14]||(t[14]=e("h3",null,"Datos",-1)),e("dl",null,[t[6]||(t[6]=e("dt",null,"Fecha del pedido",-1)),e("dd",null,o(new Date(s(i).orderDate).toLocaleString(Intl.Locale,s(j))),1),t[7]||(t[7]=e("dt",null,"Procesado",-1)),e("dd",null,"Se han cortado un "+o(s(f).processById(s(i).id).toLocaleString(Intl.Locale,{style:"percent"}))+" de las piezas",1),t[8]||(t[8]=e("dt",null,"Servido",-1)),e("dd",null,[e("div",Y,[e("span",{class:S(s(i).served?"text-green-500":"text-red-500")},[(u(),g(k(s(i).served?_:b),{width:"24"}))],2),e("span",null,"El pedido "+o(s(i).served?"ya":"no")+" se ha entregado",1)])])]),e("h3",null,"Piezas ("+o(s(i).pieces.length)+")",1),e("table",null,[t[11]||(t[11]=e("thead",null,[e("tr",{class:"flex flex-col md:table-row"},[e("th",null,"Largo"),e("th",null,"Ancho"),e("th",null,"Grosor"),e("th",null,"Color"),e("th",null,"Superficie"),e("th",null,"Volumen"),e("th",null,"Cortada")])],-1)),l(z,{tag:"tbody",name:"list"},{default:r(()=>[(u(!0),c(C,null,N(s(i).pieces,n=>(u(),c("tr",{key:n,class:"flex flex-col md:table-row"},[e("td",null,o(n.dimensions.length)+" cm",1),e("td",null,o(n.dimensions.width)+" cm",1),e("td",null,o(n.dimensions.thickness)+" cm",1),e("td",null,o(n.color),1),e("td",null,[d(o(s(v).area(n.dimensions,n.bothFaces).toLocaleString())+" m",1),t[9]||(t[9]=e("sup",null,"2",-1))]),e("td",null,[d(o(s(v).volume(n.dimensions).toLocaleString())+" m",1),t[10]||(t[10]=e("sup",null,"3",-1))]),e("td",null,[l(H,{style:V(n.cut?"success":"danger")},{default:r(()=>[d(o(n.cut?"Sí":"No"),1)]),_:2},1032,["style"])])]))),128))]),_:1})]),(u(),g(D,{to:"body"},[l(G,{opened:s(a).opened,onClose:s(M)},{title:r(()=>[d(" ¿Seguro que desea borrar el pedido de "+o(s(a).item.client)+"? ",1)]),default:r(()=>[e("p",Z,[e("span",{class:S(s(a).item.served?"text-green-500":"text-red-500")},[(u(),g(k(s(a).item.served?_:b),{width:"24"}))],2),d(" El pedido "+o(s(a).item.served?"ya":"no")+" se ha entregado ",1)]),l(A,{type:"warning"},{default:r(()=>t[12]||(t[12]=[d("Esto borrara el pedido así como las piezas asociadas al mismo y no es posible recuperar el pedido.")])),_:1})]),actions:r(()=>[l(m,{"button-style":"danger",class:"rounded-md",onClick:t[1]||(t[1]=n=>T(s(a).item))},{default:r(()=>t[13]||(t[13]=[d("Borrar")])),_:1})]),_:1},8,["opened","onClose"])]))],64)}}};export{oe as default};
//# sourceMappingURL=details-ltChjjSd.js.map
