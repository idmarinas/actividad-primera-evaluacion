{"version":3,"file":"add-DVUkG64Y.js","sources":["../../src/views/pieces/add.vue","../../src/views/orders/add.vue"],"sourcesContent":["<script setup>\nimport Input from '@/components/forms/input.vue'\nimport Button from '@/components/forms/button.vue'\nimport { usePiecesStore } from '@/stores/pieces'\n\nconst store = usePiecesStore()\n\n// const model = defineModel({\n// \tid,\n// \tcolor,\n// \tbothFaces,\n// \tcut\n// })\n\nconst props = defineProps({\n\tisEdit: Boolean\n})\n\nconst id = defineModel('id')\nconst order = defineModel('order')\nconst dimensionsLength = defineModel('dimensionsLength')\nconst dimensionsWidth = defineModel('dimensionsWidth')\nconst dimensionsThickness = defineModel('dimensionsThickness')\n\nfunction generatePieceId() {\n\tid.value =  store.generatePieceId()\n}\n</script>\n\n<template>\n\t<div class=\"flex gap-3 items-center\">\n\t\t<label for=\"piece_id\">Nº de pedido</label>\n\t\t<Input v-if=\"props.isEdit\" type=\"number\" class=\"rounded-lg flex-1\" id=\"piece_id\" v-model=\"id\" />\n\t\t<template v-else>\n\t\t\t<div class=\"flex-1 flex gap-0\">\n\t\t\t\t<Input type=\"number\" readonly class=\"rounded-l-lg flex-1\" id=\"piece_id\" v-model=\"id\" />\n\t\t\t\t<Button class=\"rounded-r-lg\" @click=\"generatePieceId()\" :disabled=\"id !== undefined\">Generar</Button>\n\t\t\t</div>\n\t\t</template>\n\t</div>\n\n\t<div class=\"col-span-full\">\n\t\t<h5>Dimensiones</h5>\n\t\t<div class=\"grid grid-cols-3 gap-3\">\n\t\t\t<div class=\"flex gap-3 items-center\">\n\t\t\t\t<label for=\"piece_dimensions_length\">Largo (cm)</label>\n\t\t\t\t<Input class=\"rounded-lg flex-1\" type=\"number\" id=\"piece_dimensions_length\" v-model=\"dimensionsLength\" step=\"1\" />\n\t\t\t</div>\n\t\t\t<div class=\"flex gap-3 items-center\">\n\t\t\t\t<label for=\"piece_dimensions_width\">Ancho (cm)</label>\n\t\t\t\t<Input class=\"rounded-lg flex-1\" type=\"number\" id=\"piece_dimensions_width\"  v-model=\"dimensionsWidth\" step=\"1\" />\n\t\t\t</div>\n\t\t\t<div class=\"flex gap-3 items-center\">\n\t\t\t\t<label for=\"piece_dimensions_thickness\">Grosor (cm)</label>\n\t\t\t\t<Input class=\"rounded-lg flex-1\" type=\"number\" id=\"piece_dimensions_thickness\"  v-model=\"dimensionsThickness\" step=\"1\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class=\"flex gap-3 items-center\">\n\t\t<label for=\"piece_id\"></label>\n\t\t<Input type=\"number\" id=\"piece_id\" />\n\t</div>\n\t\n\t<div class=\"flex gap-3 items-center\">\n\t\t<label for=\"piece_id\"></label>\n\t\t<Input type=\"number\" id=\"piece_id\" />\n\t</div>\n</template>\n","<script setup>\nimport Input from '@/components/forms/input.vue'\nimport Button from '@/components/forms/button.vue'\nimport Add from '@/components/icons/add.vue'\nimport AddPiece from '../pieces/add.vue'\n\nimport { useOrdersStore } from '@/stores/orders'\nimport { usePageTitleStore } from '@/stores/page-title'\nimport { ref, watch } from 'vue'\n\nconst pageStore = usePageTitleStore()\n\nconst props = defineProps({\n\tid: String\n})\n\nconst store = useOrdersStore()\n\nconst order = ref(store.find(props.id))\n\nfunction generateOrderId() {\n\torder.value.id = store.generateOrderId()\n}\n\nfunction checkIsEdit() {\n\treturn ! (order.value.id === undefined)\n}\n\nconst isEdit = checkIsEdit()\n\nfunction process() {\n\tif (order.value.pieces.length < 1) {\n\t\treturn 'Todavia no se han agregado piezas al pedido'\n\t}\n\n\tlet num = store.process(order)\n\tlet percent = num === undefined ? '¿?' : num.toLocaleString(Intl.Locale, { style: 'percent' })\n\n\treturn `${percent}`\n}\n\nfunction canAddPieces() {\n\treturn ! (order.value.id === undefined)\n}\n\nfunction addPiece() {\n\torder.value.pieces.push({dimendions: {}})\n\n\tconsole.log(order.value)\n}\n\npageStore.title = isEdit ? 'Editar pedido' : 'Crear pedido'\n</script>\n\n<template>\n\t<form class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n\n\t\t<h2 class=\"col-span-full\">Datos del pedido</h2>\n\n\t\t<div class=\"flex gap-3 items-center\">\n\t\t\t<label for=\"order_id\">Nº de pedido</label>\n\t\t\t<Input v-if=\"isEdit\" type=\"number\" class=\"rounded-lg flex-1\" id=\"order_id\" v-model=\"order.id\" />\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"flex-1 flex gap-0\">\n\t\t\t\t\t<Input type=\"number\" readonly class=\"rounded-l-lg flex-1\" id=\"order_id\" v-model=\"order.id\" />\n\t\t\t\t\t<Button class=\"rounded-r-lg\" @click=\"generateOrderId()\" :disabled=\"order.id !== undefined\">Generar</Button>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t\t<div class=\"flex gap-3 items-center\">\n\t\t\t<label for=\"order_client\">Cliente</label>\n\t\t\t<Input type=\"text\" class=\"rounded-lg flex-1\" id=\"order_client\" v-model=\"order.client\" />\n\t\t</div>\n\t\t\n\t\t<div class=\"flex gap-3 items-center\">\n\t\t\t<label for=\"order_date\">Fecha pedido</label>\n\t\t\t<Input type=\"datetime-local\" class=\"rounded-lg flex-1\" id=\"order_date\" v-model=\"order.dateOrder\" />\n\t\t</div>\n\t\t<div class=\"flex gap-3 items-center\">\n\t\t\t<label>Procesado</label>\n\t\t\t<div class=\"flex-1\">\n\t\t\t\t{{ process() }}\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"flex gap-3 items-center\">\n\t\t\t<Input type=\"checkbox\" class=\"rounded-lg\" id=\"order_served\" v-model=\"order.served\" />\n\t\t\t<label for=\"order_served\">Servido</label>\n\t\t</div>\n\n\t\t<h3 class=\"col-span-full\">Piezas encargadas</h3>\n\n\t\t<div class=\"flex items-center\">\n\t\t\t<Button \n\t\t\t\t@click=\"addPiece()\"\n\t\t\t\t:button-style=\"canAddPieces() ? 'success' : 'warning'\" \n\t\t\t\tclass=\"rounded-lg\" \n\t\t\t\t:icon=\"true\" \n\t\t\t\t:disabled=\"!canAddPieces()\"\n\t\t\t>\n\t\t\t\t<Add width=\"24\" /> \n\t\t\t\t{{ canAddPieces() ? 'Añadir pieza' : 'Crea un ID para el pedido' }}\n\t\t\t</Button>\n\t\t</div>\n\n\t\t<div class=\"col-span-full divide-y divide-gold-sand-500\">\n\t\t\t<div v-for=\"(piece, index) in order.pieces\" :key=\"index\" class=\"grid grid-cols-2 py-2\">\n\t\t\t\t<AddPiece \n\t\t\t\t\t:isEdit=\"isEdit\"\n\t\t\t\t\tv-model:order=\"order.id\" \n\t\t\t\t\tv-model:id=\"piece.id\" \n\t\t\t\t\tv-model:dimensions-length=\"piece.dimendions.length\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</template>\n"],"names":["store","usePiecesStore","props","__props","id","_useModel","dimensionsLength","dimensionsWidth","dimensionsThickness","generatePieceId","pageStore","usePageTitleStore","useOrdersStore","order","ref","generateOrderId","checkIsEdit","isEdit","process","num","canAddPieces","addPiece"],"mappings":"u5BAKA,MAAMA,EAAQC,EAAc,EAStBC,EAAQC,EAIRC,EAAKC,EAAWF,EAAC,IAAI,EACbE,EAAYF,EAAA,OAAO,EACjC,MAAMG,EAAmBD,EAAYF,EAAA,kBAAkB,EACjDI,EAAkBF,EAAWF,EAAC,iBAAiB,EAC/CK,EAAsBH,EAAYF,EAAA,qBAAqB,EAE7D,SAASM,GAAkB,CAC1BL,EAAG,MAASJ,EAAM,gBAAe,CAClC,+hEChBA,MAAMU,EAAYC,EAAiB,EAE7BT,EAAQC,EAIRH,EAAQY,EAAc,EAEtBC,EAAQC,EAAId,EAAM,KAAKE,EAAM,EAAE,CAAC,EAEtC,SAASa,GAAkB,CAC1BF,EAAM,MAAM,GAAKb,EAAM,gBAAe,CACvC,CAEA,SAASgB,GAAc,CACtB,OAAUH,EAAM,MAAM,KAAO,MAC9B,CAEA,MAAMI,EAASD,EAAW,EAE1B,SAASE,GAAU,CAClB,GAAIL,EAAM,MAAM,OAAO,OAAS,EAC/B,MAAO,8CAGR,IAAIM,EAAMnB,EAAM,QAAQa,CAAK,EAG7B,MAAO,GAFOM,IAAQ,OAAY,KAAOA,EAAI,eAAe,KAAK,OAAQ,CAAE,MAAO,SAAW,CAAA,CAE5E,EAClB,CAEA,SAASC,GAAe,CACvB,OAAUP,EAAM,MAAM,KAAO,MAC9B,CAEA,SAASQ,GAAW,CACnBR,EAAM,MAAM,OAAO,KAAK,CAAC,WAAY,CAAA,CAAE,CAAC,EAExC,QAAQ,IAAIA,EAAM,KAAK,CACxB,CAEA,OAAAH,EAAU,MAAQO,EAAS,gBAAkB"}